(function() {
	'use strict';

	angular
		.module('rBox')
		.filter('minToH', minToH);

	function minToH() {
		return function(min) {
			var _hour = 60;
			var _min = min * 1;
			var _gtHour = _min / _hour >= 1;
			var _hPlusMin = _min % _hour;
			var _hasMinutes = _hPlusMin !== 0;
			var _hours = Math.floor(_min / _hour);
			var _hoursText = _hours === 1 ? ' hour' : ' hours';
			var _minutes = _hasMinutes ? ', ' + _hPlusMin + _minText(_hPlusMin) : '';
			var _noHMinText = _min === 1 ? ' minute' : ' minutes';
			var timeStr = null;

			/**
			 * Get minute/s text from minutes
			 *
			 * @param minutes {number}
			 * @private
			 * @returns {string}
			 */
			function _minText(minutes) {
				if (_hasMinutes && minutes === 1) {
					return ' minute';
				} else if (_hasMinutes && minutes !== 1) {
					return ' minutes';
				}
			}

			if (_gtHour) {
				timeStr = _hours + _hoursText + _minutes;
			} else {
				timeStr = _min + _noHMinText;
			}

			return timeStr;
		};
	}
}());